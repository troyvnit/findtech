@using System.Globalization
@using FindTech.Entities.Models.Enums;
@model FindTech.Web.Models.ArticleViewModel
@{
    var article = Model;
    var highestOpinion = article.Opinions.OrderByDescending(a => a.OpinionCount).ThenByDescending(a => a.OpinionLevel).FirstOrDefault();
    var opinionBackground = "primary";
    var opinionLevel = "???";
    if (highestOpinion != null)
    {
        switch (highestOpinion.OpinionLevel)
        {
            case OpinionLevel.Bad:
                opinionBackground = "warning";
                opinionLevel = "Tệ";
                break;
            case OpinionLevel.Average:
                opinionBackground = "info";
                opinionLevel = "Tạm";
                break;
            case OpinionLevel.Good:
                opinionBackground = "success";
                opinionLevel = "Hay";
                break;
            case OpinionLevel.Excellent:
                opinionBackground = "danger";
                opinionLevel = "Tuyệt";
                break;   
        }
    }
}
<div class="col-sm-3 col-md-3 isotope-item item-clone">
    <div class="article">
        <div class="default">
            <a href="@Url.Action("Detail", "Article", new { seoCategoryName = article.ArticleSeoCategoryName, seoTitle = article.SeoTitle })" class="article-avatar">
                <img src="@article.Avatar" alt="" title="" width="270" height="270">
            </a>
            <div class="article-description">
                <a href="@Url.Action("Detail", "Article", new { seoCategoryName = article.ArticleSeoCategoryName, seoTitle = article.SeoTitle })" class="title">@article.Title</a>
                <div class="posted-info"><span class="blurry-text">Đăng:</span><strong> @article.PublishedDate.ToString("dd MMM yy HH:mm:ss", new CultureInfo("vi-VN")), <span class="blurry-text">bởi</span> @article.CreatedUserDisplayName</strong></div>
                <div class="description">@Html.Raw(article.Description)</div>
            </div>
            <div class="social">
                <span class="opinion"><span class="background-@opinionBackground">@opinionLevel</span></span>
                <a class="fa fa-eye" href="@Url.Action("Detail", "Article", new { seoCategoryName = article.ArticleSeoCategoryName, seoTitle = article.SeoTitle })"><span class="count">@article.ViewCount</span></a>
                <a class="fa fa-comments" href="@Url.Action("Detail", "Article", new { seoCategoryName = article.ArticleSeoCategoryName, seoTitle = article.SeoTitle })"><span class="count">@article.CommentCount</span></a>
                <a class="fa fa-thumb-tack" href="#"></a>
            </div>
        </div>
    </div><!-- .article -->   
</div>
